---
name: Garage Management API
status: open
created: 2025-08-31T20:37:15Z
updated: 2025-08-31T20:47:15Z
github: https://github.com/iaminawe/ParkingGarage/issues/4
depends_on: [2, 3]
parallel: true
conflicts_with: []
---

# Task: Garage Management API

## Description
Implement the garage configuration and management endpoints. This includes APIs to set up the garage structure (floors, bays, spots), configure rates, and initialize the parking spots in the system. This provides the foundation for all spot-related operations.

## Acceptance Criteria
- [ ] GET /api/v1/garage returns current garage configuration
- [ ] POST /api/v1/garage/initialize creates garage structure
- [ ] PUT /api/v1/garage/rates updates pricing configuration
- [ ] Garage initialization creates all spots correctly
- [ ] Spot IDs follow F{floor}-B{bay}-S{spot} format
- [ ] Configuration persists in memory
- [ ] Validation for garage structure inputs
- [ ] Proper error responses for invalid configurations

## Technical Details
- Implement garage initialization logic
- Auto-generate spots based on floor/bay configuration
- Validate garage structure constraints
- Support partial updates to configuration

**Files to create/modify:**
- `src/routes/garage.js` - Garage route definitions
- `src/controllers/garageController.js` - Garage business logic
- `src/services/garageService.js` - Garage initialization service
- `src/middleware/validation/garageValidation.js` - Input validation

**API Endpoints:**
```javascript
// GET /api/v1/garage
// Response: { name, floors, rates, statistics }

// POST /api/v1/garage/initialize
// Body: { 
//   name: "Main Street Garage",
//   floors: [
//     { number: 1, bays: 3, spotsPerBay: 20 }
//   ]
// }

// PUT /api/v1/garage/rates
// Body: {
//   standard: 5.00,
//   compact: 4.00,
//   oversized: 7.00
// }
```

## Dependencies
- [ ] Task 2 - Express server running
- [ ] Task 3 - Data models implemented

## Effort Estimate
- Size: M
- Hours: 3-4 hours
- Parallel: true (can work alongside Task 5)

## Definition of Done
- [ ] All garage endpoints functional
- [ ] Spots auto-generated correctly
- [ ] Configuration updates work
- [ ] Input validation in place
- [ ] Error handling tested
- [ ] API tests written
- [ ] Postman collection updated
