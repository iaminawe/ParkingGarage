---
name: Data Models and Storage Layer
status: open
created: 2025-08-31T20:37:15Z
updated: 2025-08-31T20:47:15Z
github: https://github.com/iaminawe/ParkingGarage/issues/3
depends_on: [2]
parallel: false
conflicts_with: []
---

# Task: Data Models and Storage Layer

## Description
Implement the in-memory data storage layer using JavaScript Map objects and create the data models for spots, vehicles, and garage configuration. This includes setting up the repository pattern for future database migration and basic data access methods.

## Acceptance Criteria
- [ ] Spot model defined with all required fields
- [ ] Vehicle/parking record model implemented
- [ ] Garage configuration structure created
- [ ] In-memory Maps initialized for spots and vehicles
- [ ] Repository pattern implemented for data access
- [ ] Basic CRUD operations for spots
- [ ] Spot ID generation working (F{floor}-B{bay}-S{spot})
- [ ] Data validation functions implemented

## Technical Details
- Use JavaScript Map for O(1) lookups
- Implement singleton pattern for storage
- Create data access layer abstraction
- Add JSDoc comments for all models

**Files to create/modify:**
- `src/models/spot.js` - Spot model definition
- `src/models/vehicle.js` - Vehicle/parking record model
- `src/models/garage.js` - Garage configuration model
- `src/repositories/spotRepository.js` - Spot data access
- `src/repositories/vehicleRepository.js` - Vehicle data access
- `src/repositories/garageRepository.js` - Garage config access
- `src/storage/memoryStore.js` - In-memory storage singleton
- `src/utils/validators.js` - Data validation helpers

**Data Structures:**
```javascript
// Spot Model
{
  id: "F1-B1-S001",
  floor: 1,
  bay: 1,
  spotNumber: 1,
  type: "standard", // compact, standard, oversized
  status: "available", // available, occupied
  features: [], // "ev_charging", "handicap"
  currentVehicle: null // license plate or null
}

// Vehicle/Parking Record
{
  licensePlate: "ABC123",
  spotId: "F1-B1-S001",
  checkInTime: "2024-01-01T10:00:00Z",
  vehicleType: "standard",
  rateType: "hourly"
}

// Garage Configuration
{
  name: "Main Street Garage",
  floors: [
    { number: 1, bays: 3, spotsPerBay: 20 }
  ],
  rates: {
    standard: 5.00,
    compact: 4.00,
    oversized: 7.00,
    ev_charging: 8.00
  },
  spotTypes: {
    compact: { minSize: 0, maxSize: 1 },
    standard: { minSize: 1, maxSize: 2 },
    oversized: { minSize: 2, maxSize: 3 }
  }
}
```

## Dependencies
- [ ] Task 2 - Project setup complete
- [ ] Express framework available

## Effort Estimate
- Size: M
- Hours: 3-4 hours
- Parallel: false (needed by most other tasks)

## Definition of Done
- [ ] All models have proper structure
- [ ] Repository methods work correctly
- [ ] Data validation in place
- [ ] Unit tests for models written
- [ ] JSDoc comments complete
- [ ] Spot ID generation tested
- [ ] Memory store singleton pattern working
